$(document).ready(function(){0==$("#side-left, #job-side-column").children().length&&($("#side-left, #job-side-column").hide(),$("#content").css("box-sizing","border-box"),$("#content").css("width","100%")),$(".tab_content").hide(),$("ul.tabs li:first").addClass("active").show(),$(".tab_content:first").show(),$("ul.tabs li").click(function(){$("ul.tabs li").removeClass("active"),$(this).addClass("active"),$(".tab_content").hide();var a=$(this).find("a").attr("href");return $(a).fadeIn(),!1}),$(".disabled_tnt_pagination").click(function(a){return a.preventDefault(),!1})});var IsDynamicWidgetTemp="''";function SalaryChange(){$("#txtSalaryLowerBand").val(""),$("#txtSalaryUpperBand").val(""),$("#txtSalaryLowerBand").prop("disabled",0==$("#ddlSalary").val()),$("#txtSalaryUpperBand").prop("disabled",0==$("#ddlSalary").val())}function LoadRoles(a,e){$.ajax({type:"POST",cache:!1,url:"/job/ajaxcalls/ajaxMethods.asmx/getrolesjson",data:"{'ProfessionId':"+a+"}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){$("#"+e+" option").remove(),$.each(a.d,function(a,t){$("#"+e).append($("<option></option>").val(t.ID).html(t.Value))})}})}$(document).ready(function(){$(".numbersOnly").keyup(function(){this.value=this.value.replace(/[^0-9\.]/g,"")}),$(".sorting-button > select").change(function(){$(this).parent().children("a").text($(this).children("option:selected").text())}),$("#salaryAnnualTab").click(function(){$("#salaryAnnualTab").css("font-weight","bold"),$("#salaryHourlyTab").css("font-weight",""),$("#liAnnualTab").addClass("active"),$("#liHourlyTab").removeClass("active"),$("#hiddenSalaryTypeID").val(1)}),$("#salaryHourlyTab").click(function(){$("#salaryHourlyTab").css("font-weight","bold"),$("#salaryAnnualTab").css("font-weight",""),$("#liHourlyTab").addClass("active"),$("#liAnnualTab").removeClass("active"),$("#hiddenSalaryTypeID").val(2)}),$("#locationID").change(function(){var a=$("#countryID option:selected").data("placeholdertag");null!=a&&""!=a||(null==(a=$("#locationID option:selected").data("placeholdertag"))&&(a=""),$(".divSalaryCurrency").html(a+" "));var e=$("#locationID option:selected").val()<1&&(0==$("#countryID").length||$("#countryID option:selected").val()<1);"1"!=$("#hfCountryCount").val()&&($("#salaryID").prop("disabled",e),$("#salarylowerband").prop("disabled",e),$("#salaryupperband").prop("disabled",e))}),$("#locationID").change(),$("#countryID").change(function(){$("#divLocation").html("<img src='/images/loading.gif' alt='loading' />");var a="";$("#countryID option:selected").each(function(){a+=$(this).val()}),$.ajax({type:"POST",cache:!1,url:"/job/ajaxcalls/ajaxMethods.asmx/GetLocations",data:"{'CountryID':"+a+", 'DefaultLocationID':-1, 'IsDynamicWidget':"+IsDynamicWidgetTemp+"}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){$("#divLocation").html(a.d),$("#locationID").change(function(){var a=$("#countryID option:selected").data("placeholdertag");null!=a&&""!=a||null==(a=$("#locationID option:selected").data("placeholdertag"))&&(a=""),$(".divSalaryCurrency").html(a+" ");var e=$("#locationID option:selected").val()<1&&(0==$("#countryID").length||$("#countryID option:selected").val()<1);"1"!=$("#hfCountryCount").val()&&($("#salaryID").prop("disabled",e),$("#salarylowerband").prop("disabled",e),$("#salaryupperband").prop("disabled",e))});var e=$("#countryID option:selected").data("placeholdertag");null!=e&&""!=e||null==(e=$("#locationID option:selected").data("placeholdertag"))&&(e=""),$(".divSalaryCurrency").html(e+" ")},fail:function(){$("#divLocation").html("It didn't work")}}),$.ajax({type:"POST",cache:!1,url:"/job/ajaxcalls/ajaxMethods.asmx/GetAreas",data:"{'LocationId':-1, 'IsDynamicWidget':"+IsDynamicWidgetTemp+"}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){$("#divArea").html(a.d)},fail:function(){$("#divArea").html("It didn't work")}}),$.ajax({type:"POST",cache:!1,url:"/job/ajaxcalls/ajaxMethods.asmx/getareasdropdown",data:"{'LocationId':-1, 'IsDynamicWidget':"+IsDynamicWidgetTemp+"}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){$("#divAreaDropDown").html(a.d)},fail:function(){$("#divAreaDropDown").html("It didn't work")}});var e=$("#countryID option:selected").data("placeholdertag");null!=e&&""!=e||null==(e=$("#locationID option:selected").data("placeholdertag"))&&(e=""),$(".divSalaryCurrency").html(e+" ")});var a=0==$("#countryID").length||$("#countryID option:selected").val()<1;"1"!=$("#hfCountryCount").val()&&($("#salaryID").prop("disabled",a),$("#salarylowerband").prop("disabled",a),$("#salaryupperband").prop("disabled",a)),$("#countryID").length&&$("#countryID").change(),$("#professionID").change(function(){$("#divRoleID").html("<img src='/images/loading.gif' alt='loading' />");var a="";$("#professionID option:selected").each(function(){a+=$(this).val()}),$.ajax({type:"POST",cache:!1,url:"/job/ajaxcalls/ajaxMethods.asmx/getroles",data:"{'ProfessionId':"+a+", 'IsDynamicWidget':"+IsDynamicWidgetTemp+"}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){$("#divRoleID").replaceWith(a.d)},fail:function(){$("#divRoleID").html("It didn't work")}})}),$("#salaryID").change(function(){$("#salaryID option:selected").each(function(){$(this).val()}),$("#salarylowerband").val(""),$("#salaryupperband").val(""),$("#salarylowerband").focus()})});var strValue="?search=1";function JobSearch(a){if(null==a&&(a=""),strValue="?search=1",GetValues("keywords"),GetValues("professionID"),GetValues("roleIDs"),GetValues("countryID"),GetValues("locationID"),GetValues("areaIDs"),GetValues("companyname"),GetValues("salaryID"),GetValues("salarylowerband"),GetValues("salaryupperband"),GetValues("workTypeID"),GetValues("advertiserid"),GetValues("proposedstartdate"),GetValues("proposedenddate"),GetValues("advertiserid"),GetValues("googlemapaddress"),GetValues("radius"),strValue.indexOf("&",0)<1){var e=a+"/advancedsearch.aspx?search=1";window.open(e,"_top")}else{var t=(e=a+"/advancedsearch.aspx")+strValue;window.open(t,"_top")}}function GetValues(a){var e=$.trim($("#"+a).val());""!=e&&"-1"!=e&&"0"!=e&&(strValue="salarylowerband"==a||"salaryupperband"==a?strValue+"&"+a+"=1;"+encodeURIComponent(e):strValue+"&"+a+"="+encodeURIComponent(e))}strValue="?search=1";function SiteSearch(a){if(null==a&&(a=""),strValue="?search=1",GetValues("keywords"),GetValues("language"),strValue.indexOf("&",0)<1)alert("Please select at least one of the fields.");else{var e=a+"/sitesearch.aspx"+strValue;window.open(e,"_top")}}var saveJobRequesting=!1;function SaveJob(a,e,t){if(!saveJobRequesting){saveJobRequesting=!0;var o=!1,n=a;return $(a).replaceWith("<img id='img_"+e+"' src='/images/ajax-loading.gif' />"),$.ajax({type:"POST",cache:!1,url:"/job/ajaxcalls/ajaxMethods.asmx/SaveJobForMember",data:"{'JobID':"+t+"}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){switch($("#img_"+e).replaceWith(n),console.log(a.d.Success),a.d.Action){case"Login":o=!0,location.href="/member/mysavedjobs.aspx?id="+t;break;case"Deleted":$.each($("."+e),function(e,t){$(this).text(a.d.Message).removeClass("job-saved")});break;case"Saved":$.each($("."+e),function(e,t){$(this).text(a.d.Message).addClass("job-saved")})}},fail:function(){location.href="/member/mysavedjobs.aspx?id="+t,o=!0},complete:function(a,e){saveJobRequesting=!1}}),o}return!1}function SaveSelectedJobs(){var a="";$("input:checkbox[name=chkSaveJob]:checked").each(function(){a=""==a?$(this).val():a+","+$(this).val()}),window.location="/member/mysavedjobs.aspx?id="+a}function BoardyDropDownToggle(a){$(a).next(".boardy-dropdown").toggle()}function initMenu(){$("#side-drop-menu li a").click(function(){$(this).next().slideToggle("normal")})}function isNumberKey(a){var e=a.which?a.which:a.keyCode;return e>=37&&e<=40||!(46!=e&&e>31&&(e<48||e>57))}function AssginGoogleMapTextBox(a,e){var t;t=new google.maps.places.Autocomplete(document.getElementById(a),{types:["geocode"]}),google.maps.event.addListener(t,"place_changed",function(){var a,o,n=t.getPlace();n.address_components&&console.log(n),null==n.geometry?(a="",o=""):(a=n.geometry.location.lat(),o=n.geometry.location.lng()),$("#hfMapAddressLat"+e).val(a),$("#hfMapAddressLng"+e).val(o)})}function AssginJobAlertGoogleMapTextBox(a){var e;e=new google.maps.places.Autocomplete(document.getElementById(a),{types:["geocode"]}),google.maps.event.addListener(e,"place_changed",function(){var a=e.getPlace();a.address_components&&console.log(a)})}$(document).ready(function(){$("#boardy-popup").appendTo("body"),$("a[name=boardy-modal]").click(function(a){a.preventDefault();var e=$(this).attr("href");$(e+" .boardy-poptitle").html($(this).attr("data-title")),$(e+" .boardy-popcontent").html($(this).attr("data-content"));var t=$(document).height(),o=$(window).width();$("#boardy-popshadow").css({width:o,height:t}),$("#boardy-popshadow").fadeIn(500),$("#boardy-popshadow").fadeTo("fast",.7);$(window).height();var n=$(window).width();$(e).css("left",n/2-$(e).width()/2),$(e).fadeIn(500)}),$(".window .boardy-popclose").click(function(a){a.preventDefault(),$("#boardy-popshadow").hide(),$(".window").hide()}),$("#boardy-popshadow").click(function(){$(this).hide(),$(".window").hide()}),$(window).resize(function(){var a=$("#boardy-popup .window"),e=$(document).height(),t=$(window).width();$("#boardy-popshadow").css({width:t,height:e});$(window).height();var o=$(window).width();a.css("left",o/2-a.width()/2)}),$(document).click(function(a){var e=a.target;$(e).is(".boardy-dropdown-toggle")||$(e).parents().is(".boardy-dropdown-toggle")||$(".boardy-dropdown").hide()})}),$(document).ready(function(){initMenu()});

$(document).ready(function(){
	function loadMiniMigrationScript() {
		console.log("loading mini migration script");

		const scriptEl = document.createElement("script");
		scriptEl.setAttribute("src", "https://static-ap.applyflow.site/afdevdemo/wp-content/themes/af-mini/js/mini/migration.js?t=" + Date.now());
		
		scriptEl.addEventListener("load", () => {
			console.log("mini migration script loaded")
		});

		scriptEl.addEventListener("error", (ev) => {
			console.error("mini migration script load failed", ev);
		});
		
		document.body.appendChild(scriptEl);
	}
	
	if(window.self !== window.parent) {
		try {
			const topLocation = window.parent.location.host;
			
			// checked loading
			if(topLocation.indexOf("localhost")!==-1 || topLocation.indexOf(".applyflow.site")!==-1 || topLocation.indexOf(".applyflow.com")!==-1) {
				loadMiniMigrationScript();
			}
		}
		catch(err) {
			//fallback - load anyways
			loadMiniMigrationScript();
		}
	}
});
